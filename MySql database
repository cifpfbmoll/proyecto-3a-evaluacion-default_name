CREATE SCHEMA `gestion_universidad` DEFAULT CHARACTER SET utf8 ;
drop schema gestion_universidad;
USE gestion_universidad;

CREATE TABLE Titulacion (
ID_titulacion INT NOT NULL AUTO_INCREMENT,
Nombre_Titulacion VARCHAR(100) NOT NULL,
PRIMARY KEY (ID_titulacion)
);

CREATE TABLE Departamento (
ID_Departamento INT NOT NULL AUTO_INCREMENT,
Nombre_Departamento VARCHAR(100) NOT NULL,
PRIMARY KEY (id_departamento)
);

drop table persona;
CREATE TABLE Persona (
ID_Persona varchar(9) NOT NULL,
Nombre VARCHAR(100) NOT NULL,
Edad integer not null,
Telefono integer,
Contraseña varchar(25)not null,
Rol character,
PRIMARY KEY (id_persona)
);
drop table alumno;
create table alumno (
ID_Persona varchar(9) NOT NULL, 
primary key(ID_Persona),
constraint alumno_fk_persona FOREIGN KEY (ID_Persona) references Persona(ID_Persona)
);
drop table profesor;
create table profesor (
ID_Persona varchar(9) NOT NULL, 
ID_Departamento INT NOT NULL AUTO_INCREMENT,
primary key(ID_Persona),
constraint profesor_fk_persona FOREIGN KEY (ID_Persona) references Persona(ID_Persona),
constraint profesor_fk_departamento FOREIGN KEY (ID_Departamento) references Departamento(ID_Departamento)
);

create table Administrador (
ID_Persona varchar(9) NOT NULL, 
primary key(ID_Persona),
constraint administrador_fk_persona FOREIGN KEY (ID_Persona) references Persona(ID_Persona)
);

create table Bibliotecario (
ID_Persona varchar(9) NOT NULL, 
primary key(ID_Persona),
constraint bibliotecario_fk_persona FOREIGN KEY (ID_Persona) references Persona(ID_Persona)
);

create table Asignatura (
ID_Asignatura INT auto_increment NOT NULL,
Nombre_Asignatura varchar(40) NOT NULL, 
ID_Titulacion INT NOT NULL,
ID_Profesor varchar(9) NOT NULL,
Curso	varchar(40)not null,
primary key(ID_Asignatura,Nombre_Asignatura),
constraint asignatura_fk_titulacion FOREIGN KEY (ID_Titulacion)  references Titulacion(ID_Titulacion),
constraint asignatura_fk_profesor FOREIGN KEY (ID_Profesor) references Profesor(ID_Persona)
);

create table matriculacion (
ID_Persona varchar(9) NOT NULL,
ID_Asignatura INT not null,
año_academico INT NOT NULL,
nota dec(3,1),
primary key(ID_Persona,ID_Asignatura,año_academico),
constraint matriculacion_fk_persona FOREIGN KEY (ID_Persona) references Persona(ID_Persona),
constraint matriculacion_fk_asignatura FOREIGN KEY (ID_Asignatura) references Asignatura(ID_Asignatura)
);

drop table Biblioteca;
create table Biblioteca(
ID_Biblioteca int,
primary key(ID_Biblioteca)
);

insert into biblioteca values (1);

create table Libro(
Titulo_Libro varchar(100),
Autor varchar(50),
Editorial varchar(100),
ID_Biblioteca int,
Cantidad_Total int,
Cantidad_Restante int,
Tematica varchar(50),
primary key(Titulo_Libro),
constraint libros_fk_biblioteca foreign key(ID_Biblioteca) references Biblioteca(ID_Biblioteca)
);

insert into Libro values("El niño con el pidama de rayas","John Boyne","Salamandra",1,10,10,"Historia");
insert into Libro values("Inés del alma mía","Isabel Allende","Casa del libro",1,10,10,"Historia");

CREATE TABLE Persona (
ID_Persona varchar(9) NOT NULL,
Nombre VARCHAR(100) NOT NULL,
Edad integer not null,
Telefono integer,
Contraseña varchar(25)not null,
Rol character,
PRIMARY KEY (id_persona)
);
insert into Persona values("ad1111111","Alfons",21,null,"admin","ad","Historia");





